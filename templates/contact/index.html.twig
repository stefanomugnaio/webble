{# templates/contact/index.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Contact{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('contact') }}
{% endblock %}

{% block body %}
    <section class="min-vh-100 text-white d-flex align-items-center" style="background-color="#020718">
        <div class="container py-5">


            <div class="row justify-content-center">
                <div class="col-lg-10">

                    <div class="row g-4 align-items-stretch">
                        {# Colonne texte / rassurance #}
                        <div class="col-lg-5 d-flex">
                            <div class="card bg-transparent border-0 text-start my-auto">
                                <div class="card-body p-0">
                                    <h1 class="text-uppercase text-light mb-5">
                                        Contact
                                    </p>
                                    <h1 class="h2 text-light fw-bold mb-3">
                                        Parlons de votre projet.
                                    </h1>
                                    <p class="text-light mb-4">
                                        Une question, une idée de site web, un besoin de formation&nbsp;?
                                        Dites-moi où vous en êtes, je vous réponds rapidement avec des
                                        pistes concrètes, sans blabla commercial.
                                    </p>

                                    <div class="d-flex flex-column gap-2">
                                        <div class="d-flex align-items-center">
                                            <i class="bi bi-envelope text-light me-2"></i>
                                            <span class="small text-light">Vous préférez le mail ?</span>
                                        </div>
                                        <span class="fw- text-light">
                                            contact@webble.fr
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {# Colonne formulaire #}
                        <div class="col-lg-7 d-flex">
                            <div class="card bg-body-tertiary text-dark w-100">
                                <div class="card-body p-4 p-md-5">
                                    {# Flash success éventuel #}
                                    {% for label, messages in app.flashes %}
                                        {% for message in messages %}
                                            <div class="alert alert-{{ label }} flash-message" role="alert">
                                                {{ message }}
                                            </div>
                                        {% endfor %}
                                    {% endfor %}
                                    <h2 class="h4 fw-semibold mb-3">
                                        Envoyer un message
                                    </h2>
                                    <p class="text-muted small mb-4">
                                        Remplissez ce formulaire, je reviens vers vous dès que possible
                                        pour clarifier votre besoin et voir comment je peux vous aider.
                                    </p>

                                    {{ form_start(form, {
                                        attr: {
                                            id: 'contact-form',
                                            'data-recaptcha-site-key': recaptcha_site_key
                                        }
                                    }) }}

                                        <div class="col-md-6">
                                            {{ form_label(form.nom, 'Nom', {'label_attr': {'class': 'form-label'}}) }}
                                            {{ form_widget(form.nom, {'attr': {'class': 'form-control'}}) }}
                                            <div class="text-danger small mt-1 error-message">
                                                {{ form_errors(form.nom) }}
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            {{ form_label(form.prenom, 'Prénom', {'label_attr': {'class': 'form-label'}}) }}
                                            {{ form_widget(form.prenom, {'attr': {'class': 'form-control'}}) }}
                                            <div class="text-danger small mt-1 error-message">
                                                {{ form_errors(form.prenom) }}
                                            </div>
                                        </div>

                                        <div class="col-12">
                                            {{ form_label(form.email, 'Email', {'label_attr': {'class': 'form-label'}}) }}
                                            {{ form_widget(form.email, {'attr': {'class': 'form-control', 'placeholder': 'vous@example.com'}}) }}
                                            <div class="text-danger small mt-1 error-message">
                                                {{ form_errors(form.email) }}
                                            </div>
                                        </div>

                                        <div class="col-12">
                                            {{ form_label(form.sujet, 'Sujet', {'label_attr': {'class': 'form-label'}}) }}

                                            {{ form_widget(form.sujet, {
                                                'attr': {
                                                    'class': 'form-select',
                                                }
                                            }) }}

                                            <div class="text-danger small mt-1 error-message">
                                                {{ form_errors(form.sujet) }}
                                            </div>
                                        </div>

                                        <div class="col-12">
                                            {{ form_label(form.description, 'Parlez moi de votre besoin...', {'label_attr': {'class': 'form-label'}}) }}
                                            {{ form_widget(form.description, {'attr': {'class': 'form-control'}}) }}
                                            <div class="text-danger small mt-1 error-message">
                                                {{ form_errors(form.description) }}
                                            </div>
                                        </div>

                                        <div class="col-12 mt-3">
                                            {{ form_widget(form.recaptchaToken) }}  
                                        </div>

                                        {# Champ date_creation caché #}
                                        <div class="d-none">
                                            {{ form_widget(form.date_creation) }}
                                        </div>


                                        <div class="col-12 mt-3">
                                            <button type="submit" class="btn btn-secondary w-100 rounded-pill py-2">
                                                <i class="bi bi-send me-2"></i>
                                                Envoyer mon message
                                            </button>
                                        </div>

                                    {{ form_end(form) }}
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </section>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
     {# Script reCAPTCHA v3 #}
    <script src="https://www.google.com/recaptcha/api.js?render={{ recaptcha_site_key }}"></script>
    {{ encore_entry_script_tags('contact') }}
{% endblock %}
